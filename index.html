<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>‚ú® Fabian</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f7f8fb;
  --card:#ffffff;
  --accent:#e11d48;
  --accent2:#22c55e;
  --text:#0b1220;
  --muted:#64748b;
  --shadow: 0 18px 40px rgba(15, 23, 34, .12);
  --shadow2: 0 10px 24px rgba(15, 23, 34, .10);
  --border:#e5e7eb;
}

html,body{
  margin:0;
  font-family: 'Inter', system-ui, sans-serif;
  color:var(--text);
  background:linear-gradient(180deg,#f7f8fb,#eef2ff);
  min-height:100vh;
}

/* ================= NAVBAR ================= */
.navbar{
  position:fixed;
  top:0;left:0;
  width:100%;
  height:64px;
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(10px);
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 18px;
  box-sizing:border-box;
  z-index:50;
  border-bottom:1px solid var(--border);
}

.nav-title{
  font-size:20px;
  font-weight:700;
  display:flex;
  align-items:center;
  gap:8px;
}

.nav-title span{
  font-size:18px;
}

.nav-links{
  list-style:none;
  display:flex;
  gap:14px;
  margin:0;
  padding:0;
  justify-content:center;
  flex:1;
}

.nav-links a{
  color:var(--text);
  text-decoration:none;
  padding:8px 10px;
  border-radius:10px;
  transition:.2s;
  font-weight:600;
  font-size:14px;
}

.nav-links a:hover{
  background:rgba(225, 29, 72, .10);
}

.nav-links a.active{
  background:rgba(225, 29, 72, .16);
}

.search-box{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:10px;
}

.search-box input{
  padding:8px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#fff;
  color:var(--text);
  outline:none;
  width:180px;
}

.menu-toggle{
  display:none;
  border:none;
  background:transparent;
  cursor:pointer;
  font-size:24px;
}

.mobile-nav{
  display:none;
  position:absolute;
  top:64px;
  right:12px;
  background:#fff;
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow: var(--shadow);
  overflow:hidden;
  width:220px;
}

.mobile-nav a{
  display:block;
  padding:12px 14px;
  text-decoration:none;
  color:var(--text);
  border-bottom:1px solid var(--border);
  font-weight:600;
}

.mobile-nav a:last-child{
  border-bottom:none;
}

.mobile-nav a:hover{
  background:rgba(225, 29, 72, .08);
}

/* ================= MAIN ================= */
main{
  margin-top:90px;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  padding:0 14px;
}

section{
  display:none;
  width:100%;
}

/* ================= HOME ================= */
#home{
  display:block;
}

.circle{
  margin:40px auto;
  width:340px;
  height:340px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#ffffff,#eaf0ff);
  box-shadow: var(--shadow);
}

.middle{
  font-size:160px;
  animation:spin 3.5s linear infinite;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* ================= GAME ================= */
#game{
  margin-top:20px;
}

.card{
  background:var(--card);
  border-radius:18px;
  padding:24px;
  max-width:520px;
  margin:0 auto;
  box-shadow:var(--shadow);
  text-align:center;
}

#difficulty{
  margin-top:10px;
  padding:10px 12px;
  border-radius:12px;
  background:#fff;
  color:var(--text);
  border:1px solid var(--border);
  width:100%;
  box-sizing:border-box;
}

.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  justify-content:center;
  margin-top:20px;
}

.cell{
  width:100%;
  aspect-ratio:1/1;
  background:#fff;
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:48px;
  cursor:pointer;
  border:1px solid var(--border);
  box-shadow: var(--shadow2);
}

.result{
  font-size:100px;
  margin-top:20px;
}

button{
  margin-top:10px;
  padding:10px 14px;
  background:var(--accent);
  border:none;
  color:#fff;
  border-radius:12px;
  cursor:pointer;
  font-weight:700;
  box-shadow: var(--shadow2);
}

button.secondary{
  background:var(--accent2);
}

button:active{
  transform:scale(.98);
}

/* ================= CONTACT ================= */
#contactForm{
  display:none;
  width:100%;
  max-width:420px;
  margin:40px auto;
  text-align:left;
}

#contactForm h1{
  text-align:center;
}

#contactForm input,
#contactForm textarea{
  width:100%;
  padding:10px;
  margin-top:8px;
  background:#fff;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  box-sizing:border-box;
}

#contactForm button{
  margin-top:10px;
}

/* ================= FABSE ================= */
.fabse-container{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  margin-top:40px;
}

.fabse-emoji{
  font-size:120px;
  animation:wave 1.5s infinite;
}

.speech{
  background:#fff;
  padding:16px 20px;
  border-radius:18px;
  text-align:center;
  box-shadow: var(--shadow);
}

@keyframes wave{
  0%{transform:rotate(0)}
  25%{transform:rotate(14deg)}
  50%{transform:rotate(-10deg)}
  75%{transform:rotate(14deg)}
  100%{transform:rotate(0)}
}

/* ================= SHOP ================= */
#shop{
  display:none;
}

.shop-grid{
  display:flex;
  flex-direction:column;
  gap:24px;
  margin-top:20px;
}

.auction-card{
  background:#fff;
  border-radius:18px;
  padding:24px;
  max-width:520px;
  margin:0 auto;
  box-shadow:var(--shadow);
  text-align:center;
}

.auction-card img{
  width:100%;
  border-radius:14px;
  margin-bottom:16px;
}

.auction-card h2{
  margin:10px 0 6px;
}

.auction-info{
  color:var(--muted);
  font-size:14px;
  margin-bottom:14px;
}

.price{
  font-size:18px;
  margin-bottom:14px;
}

.price span{
  color:var(--accent);
  font-weight:700;
}

.bid-row{
  display:flex;
  gap:10px;
  justify-content:center;
  align-items:center;
  margin-top:10px;
}

.bid-row input{
  width:120px;
  padding:10px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#fff;
  color:var(--text);
}

/* ================= FAQ ================= */
.faq-item{
  background:#fff;
  border-radius:14px;
  padding:16px;
  margin:10px auto;
  max-width:520px;
  text-align:left;
}

.faq-question{
  display:flex;
  justify-content:space-between;
  cursor:pointer;
}

.faq-answer{
  display:none;
  margin-top:10px;
  color:var(--muted);
}

.faq-icon{
  font-weight:700;
}

/* ================= SNAKE ================= */
#snake{
  display:none;
  margin-top:20px;
}

.snake-wrapper{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}

#snakeCanvas{
  background:#fff;
  border-radius:18px;
  box-shadow: 0 18px 40px rgba(15, 23, 34, .18);
  border:6px solid rgba(34, 197, 94, .35);
}

#snakeScore{
  margin-top:14px;
  font-size:16px;
}

.snake-controls{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}

/* ================= PONG ================= */
#pong{
  display:none;
  margin-top:20px;
}

#pongCanvas{
  background:#fff;
  border-radius:18px;
  box-shadow: 0 18px 40px rgba(15, 23, 34, .18);
  border:6px solid rgba(225, 29, 72, .35);
}

.pong-score{
  margin-top:14px;
  font-size:16px;
}

.pong-controls{
  display:flex;
  gap:12px;
  justify-content:center;
}

/* ================= MAZE ================= */
#maze{
  display:none;
  margin-top:20px;
}

.maze-card{
  background:#fff;
  border-radius:18px;
  padding:24px;
  max-width:720px;
  margin:0 auto;
  box-shadow:var(--shadow);
  text-align:center;
}

.maze-controls{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:12px;
}

.maze-canvas{
  margin-top:20px;
  width:100%;
  max-width:720px;
  height:420px;
  border-radius:18px;
  overflow:hidden;
  box-shadow:var(--shadow);
}

/* ================= RESPONSIVE ================= */
@media (max-width: 900px){
  .nav-links, .search-box{
    display:none;
  }
  .menu-toggle{
    display:block;
  }
  main{
    margin-top:80px;
  }
  .circle{
    width:260px;
    height:260px;
  }
  .middle{
    font-size:120px;
  }
  .board{
    grid-template-columns:repeat(3,1fr);
    gap:8px;
  }
  .cell{
    font-size:40px;
  }
  .maze-canvas{
    height:320px;
  }
}

@media (max-width: 520px){
  .circle{
    width:220px;
    height:220px;
  }
  .middle{
    font-size:90px;
  }
  .search-box input{
    width:120px;
  }
  .card, .auction-card{
    padding:18px;
  }
  .bid-row input{
    width:100px;
  }
  .maze-canvas{
    height:280px;
  }
}
</style>
</head>

<body>

<nav class="navbar">
  <div class="nav-title">‚ú® Fabian <span>‚Ä¢</span></div>

  <ul class="nav-links">
    <li><a href="#" onclick="show('home')" class="active">Home</a></li>
    <li><a href="#" onclick="show('spielBibliothek')">Spiel</a></li>
    <li><a href="#" onclick="show('fabse')">Fabse</a></li>
    <li><a href="#" onclick="show('Mitarbeiter')">Mitarbeiter</a></li>
    <li><a href="#" onclick="show('wortspiel')">Wortspiel</a></li>
    <li><a href="#" onclick="show('shop')">Shop</a></li>
    <li><a href="#" onclick="show('faq')">FAQ</a></li>
    <li><a href="#" onclick="show('contactForm')">Contact</a></li>
  </ul>

  <div class="search-box">
    <input id="search" placeholder="Seite durchsuchen‚Ä¶" oninput="searchPage()">
  </div>

  <button class="menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>

  <div class="mobile-nav" id="mobileNav">
    <a href="#" onclick="show('home'); closeMobileMenu()">Home</a>
    <a href="#" onclick="show('spielBibliothek'); closeMobileMenu()">Spiel</a>
    <a href="#" onclick="show('fabse'); closeMobileMenu()">Fabse</a>
    <a href="#" onclick="show('Mitarbeiter'); closeMobileMenu()">Mitarbeiter</a>
    <a href="#" onclick="show('wortspiel'); closeMobileMenu()">Wortspiel</a>
    <a href="#" onclick="show('shop'); closeMobileMenu()">Shop</a>
    <a href="#" onclick="show('faq'); closeMobileMenu()">FAQ</a>
    <a href="#" onclick="show('contactForm'); closeMobileMenu()">Contact</a>
  </div>
</nav>

<main>

<!-- HOME -->
<section id="home">
  <h1>Fabian</h1>
  <div class="circle">
    <div class="middle">üñï</div>
  </div>
</section>

<!-- SPIEL BIBLIOTHEK -->
<section id="spielBibliothek">
  <h1>Herzlich Willkommen in meiner Spiele Bibliothek</h1>
  <p>W√§hle ein Spiel aus:</p>
  <div class="auction-card" style="max-width:520px;">
    <h2>Tic Tac Toe</h2>
    <p class="auction-info">Klicke auf ‚ÄûStart‚Äú, um Tic Tac Toe zu spielen.</p>
    <button onclick="show('game')">Tic Tac Toe starten</button>
  </div>

  <div class="auction-card" style="max-width:520px; margin-top:20px;">
    <h2>Snake</h2>
    <p class="auction-info">Klassisches Snake-Spiel mit Highscore.</p>
    <button onclick="show('snake')">Snake starten</button>
  </div>

  <div class="auction-card" style="max-width:520px; margin-top:20px;">
    <h2>Pong</h2>
    <p class="auction-info">Pong mit Pfeiltasten (hoch/runter).</p>
    <button onclick="show('pong')">Pong starten</button>
  </div>

  <div class="auction-card" style="max-width:520px; margin-top:20px;">
    <h2>3D Labyrinth</h2>
    <p class="auction-info">Wechsle zwischen 2D & 3D. Ziel: Socke üß¶</p>
    <button onclick="show('maze')">3D Labyrinth starten</button>
  </div>
</section>

<!-- TIC TAC TOE -->
<section id="game">
  <h1>Tic Tac Toe</h1>

  <div class="card">
    <select id="difficulty">
      <option value="easy">Leicht</option>
      <option value="medium">Mittel</option>
      <option value="hard">Schwer</option>
    </select>

    <div class="board">
      <div class="cell" onclick="move(0)"></div>
      <div class="cell" onclick="move(1)"></div>
      <div class="cell" onclick="move(2)"></div>
      <div class="cell" onclick="move(3)"></div>
      <div class="cell" onclick="move(4)"></div>
      <div class="cell" onclick="move(5)"></div>
      <div class="cell" onclick="move(6)"></div>
      <div class="cell" onclick="move(7)"></div>
      <div class="cell" onclick="move(8)"></div>
    </div>

    <div class="result" id="result"></div>
    <div>
      üëç <span id="wins">0</span> |
      üñï <span id="losses">0</span> |
      üòê <span id="draws">0</span>
    </div>
    <button onclick="resetGame()">Neues Spiel</button>
  </div>
</section>

<!-- SNAKE -->
<section id="snake">
  <h1>Snake</h1>
  <div class="snake-wrapper">
    <canvas id="snakeCanvas" width="360" height="360"></canvas>
    <div id="snakeScore">
      Score: <span id="scoreValue">0</span> |
      Highscore: <span id="highscoreValue">0</span>
    </div>
    <div class="snake-controls">
      <button class="secondary" onclick="startSnake()">Start</button>
      <button class="secondary" onclick="restartSnake()">Neustart</button>
    </div>
  </div>
</section>

<!-- PONG -->
<section id="pong">
  <h1>Pong</h1>
  <canvas id="pongCanvas" width="480" height="320"></canvas>
  <div class="pong-score">
    Player: <span id="p1Score">0</span> |
    CPU: <span id="p2Score">0</span>
  </div>
  <div class="pong-controls">
    <button onclick="startPong()">Start</button>
    <button onclick="resetPong()">Neustart</button>
  </div>
  <p style="margin-top:12px;">Steuerung: Pfeiltasten ‚Üë ‚Üì</p>
</section>

<!-- MAZE -->
<section id="maze">
  <h1>3D Labyrinth</h1>

  <div class="maze-card">
    <div>
      <button onclick="setMazeMode('2d')">2D</button>
      <button onclick="setMazeMode('3d')">3D</button>
      <button class="secondary" onclick="resetMaze()">Neustart</button>
    </div>

    <div class="maze-canvas" id="mazeCanvas2d" style="display:block;">
      <canvas id="maze2d" width="720" height="420" style="width:100%; height:100%;"></canvas>
    </div>

    <div class="maze-canvas" id="mazeCanvas3d" style="display:none;">
      <canvas id="maze3d" width="720" height="420" style="width:100%; height:100%;"></canvas>
    </div>

    <div style="margin-top:12px;">
      Ziel: üß¶  |  Player: ü¶∂
    </div>
  </div>
</section>

<!-- FABSE -->
<section id="fabse">
  <div class="fabse-container">
    <div class="fabse-emoji">üëãüôÇ</div>
    <div class="speech">Hallo ich bin Fabse</div>
  </div>
</section>

<!-- MITARBEITER -->
<section id="Mitarbeiter">
  <h1>Fabse Raps√∂l</h1>
  <div>
    <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdzBnY3JhNGVkbG5vOTRiaGpyMWtxdmlqMWtsbGswMHJ5MGU5Y2JyNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/JIX9t2j0ZTN9S/giphy.gif" 
         alt="Test GIF"/>
  </div>
</section>

<!-- WORTSPIEL -->
<section id="wortspiel">
  <h1>Wortspiel</h1>
  <div style="display:flex; gap:10px; justify-content:center; margin-top:20px; flex-wrap:wrap;">
    <input type="text" id="wortInput" value="Fabian ...">
    <button onclick="reimName()">Namen reimen</button>
  </div>
  <div id="reimErgebnis"></div>
</section>

<!-- SHOP -->
<section id="shop">
  <h1>üõí Auktion</h1>

  <div class="shop-grid">
    <!-- Auktion 1 -->
    <div class="auction-card">
      <img src="Medien_Auktion.jpg" alt="Apple Watch & AirPods">
      <h2>Apple Watch & AirPods</h2>
      <p class="auction-info">
        Auktion aufgrund einer Investition: Der F√ºhrerschein Klasse B ist zu teuer ‚Äì deshalb muss ich auf Apple Watch und AirPods verzichten.
      </p>

      <div class="price" id="price1">Aktuelles Gebot: 67,69‚Ç¨</div>
      <div id="countdown1"></div>

      <div class="bid-row">
        <input type="number" step="0.01" id="bid1" placeholder="Gebot">
        <button onclick="placeBid(1)">Bieten</button>
      </div>
      <div id="bidInfo1"></div>
    </div>

    <!-- Auktion 2 -->
    <div class="auction-card">
      <img src="Medien_Auktion_1.jpg" alt="Portmonie">
      <h2>Portmonie</h2>
      <p class="auction-info">
        Portmonie in gutem Zustand. Perfekt als Ersatz oder Geschenk.
      </p>

      <div class="price" id="price2">Aktuelles Gebot: 12,99‚Ç¨</div>
      <div id="countdown2"></div>

      <div class="bid-row">
        <input type="number" step="0.01" id="bid2" placeholder="Gebot">
        <button onclick="placeBid(2)">Bieten</button>
      </div>
      <div id="bidInfo2"></div>
    </div>

    <!-- Auktion 3 -->
    <div class="auction-card">
      <img src="Medien_Auktion_2.jpg" alt="Schl√ºssel Bund">
      <h2>Schl√ºssel Bund</h2>
      <p class="auction-info">
        Schl√ºsselbund mit 2 Schl√ºsseln und Karabiner ‚Äì robust und praktisch.
      </p>

      <div class="price" id="price3">Aktuelles Gebot: 20,99‚Ç¨</div>
      <div id="countdown3"></div>

      <div class="bid-row">
        <input type="number" step="0.01" id="bid3" placeholder="Gebot">
        <button onclick="placeBid(3)">Bieten</button>
      </div>
      <div id="bidInfo3"></div>
    </div>
  </div>
</section>

<!-- FAQ -->
<section id="faq">
  <h1>FAQ</h1>

  <div class="faq-item">
    <div class="faq-question" onclick="toggleFAQ(this)">
      <span>Warum verkaufst du Handy und AirPods?</span>
      <span class="faq-icon">+</span>
    </div>
    <div class="faq-answer">
      Der F√ºhrerschein Klasse B ist teuer, deshalb trenne ich mich von Handy und AirPods, um das zu finanzieren.
    </div>
  </div>

  <div class="faq-item">
    <div class="faq-question" onclick="toggleFAQ(this)">
      <span>Wie lange l√§uft die Auktion?</span>
      <span class="faq-icon">+</span>
    </div>
    <div class="faq-answer">
      Die Auktion endet am 30.01.2026 um 10:00 Uhr.
    </div>
  </div>

  <div class="faq-item">
    <div class="faq-question" onclick="toggleFAQ(this)">
      <span>Wie kann ich bieten?</span>
      <span class="faq-icon">+</span>
    </div>
    <div class="faq-answer">
      Gib ein Gebot ein und klicke auf ‚ÄûBieten‚Äú. Der Preis muss h√∂her als das aktuelle Gebot sein.
    </div>
  </div>
</section>

<!-- CONTACT -->
<section id="contactForm">
  <h1>Kontakt</h1>
  <form onsubmit="sendMail(event)">
    <label for="name">Name:</label>
    <input type="text" id="name" required>
    <label for="email">E-Mail:</label>
    <input type="email" id="email" required>
    <label for="message">Nachricht:</label>
    <textarea id="message" rows="5" required></textarea>
    <button type="submit">Senden</button>
  </form>

  <div id="contactInfo">
    <strong>Kontakt Daten:</strong><br>
    Name: Fabian<br>
    Nachname: Strickmann<br>
    E-Mail: fabian@joy-ist-geil.de<br>
    Ort: Bett von Joy
  </div>
</section>

</main>

<!-- THREE.JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
let board=["","","","","","","","",""];
let over=false;
let wins=0, losses=0, draws=0;

function show(id){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
  document.querySelectorAll(".nav-links a").forEach(a=>a.classList.remove("active"));
  const activeLink = Array.from(document.querySelectorAll(".nav-links a")).find(a => a.getAttribute("onclick").includes(id));
  if(activeLink) activeLink.classList.add("active");
}

// Mobile menu
function toggleMobileMenu(){
  const nav = document.getElementById("mobileNav");
  nav.style.display = nav.style.display === "block" ? "none" : "block";
}
function closeMobileMenu(){
  document.getElementById("mobileNav").style.display = "none";
}

function searchPage(){
  let q=document.getElementById("search").value.toLowerCase();
  if(q.includes("spiel")) show('spielBibliothek');
  else if(q.includes("tic") || q.includes("tac") || q.includes("toe")) show('game');
  else if(q.includes("snake")) show('snake');
  else if(q.includes("pong")) show('pong');
  else if(q.includes("maze")) show('maze');
  else if(q.includes("fabse")) show('fabse');
  else if(q.includes("mitarbeiter")) show('Mitarbeiter');
  else if(q.includes("wort")) show('wortspiel');
  else if(q.includes("shop") || q.includes("auktion")) show('shop');
  else if(q.includes("faq")) show('faq');
  else if(q.includes("kontakt")) show('contactForm');
  else show('home');
}

// ===== Tic Tac Toe =====
function move(i){
  if(board[i]||over) return;
  board[i]="X";
  cells()[i].textContent="X";
  if(win("X")) return end("üëç");
  if(full()) return end("üòê");
  setTimeout(cpu,300);
}

function cpu(){
  let d=document.getElementById("difficulty").value;
  let m;
  if(d==="easy") m=random();
  if(d==="medium") m=medium();
  if(d==="hard") m=minimax();
  board[m]="O";
  cells()[m].textContent="O";
  if(win("O")) end("üñï");
  else if(full()) end("üòê");
}

function end(e){
  over=true;
  document.getElementById("result").textContent=e;
  if(e==="üëç") wins++;
  if(e==="üñï") losses++;
  if(e==="üòê") draws++;
  document.getElementById("wins").textContent=wins;
  document.getElementById("losses").textContent=losses;
  document.getElementById("draws").textContent=draws;
}

function resetGame(){
  board=["","","","","","","","",""];
  over=false;
  cells().forEach(c=>c.textContent="");
  document.getElementById("result").textContent="";
}

function random(){
  let e=board.map((v,i)=>v?null:i).filter(v=>v!=null);
  return e[Math.floor(Math.random()*e.length)];
}

function medium(){
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]="O"; if(win("O")){board[i]=""; return i;} board[i]="";
    }
  }
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]="X"; if(win("X")){board[i]=""; return i;} board[i]="";
    }
  }
  return random();
}

function minimax(){
  let best=-1e9,m;
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]="O";
      let s=mm(false);
      board[i]="";
      if(s>best){best=s; m=i;}
    }
  }
  return m;
}

function mm(max){
  if(win("O")) return 1;
  if(win("X")) return -1;
  if(full()) return 0;
  let best=max?-1e9:1e9;
  for(let i=0;i<9;i++){
    if(!board[i]){
      board[i]=max?"O":"X";
      best=max?Math.max(best,mm(!max)):Math.min(best,mm(!max));
      board[i]="";
    }
  }
  return best;
}

function win(p){
  return [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].some(w=>w.every(i=>board[i]===p));
}

function full(){return board.every(c=>c!=="");}

function cells(){return document.querySelectorAll(".cell");}

// ===== SNAKE =====
let snakeInterval;
let snakeSpeed = 100;
let snakeCanvas = document.getElementById("snakeCanvas");
let ctx = snakeCanvas.getContext("2d");

let gridSize = 18;
let tileSize = snakeCanvas.width / gridSize;

let snake = [];
let direction = {x:1,y:0};
let food = {x:0,y:0};
let score = 0;
let running = false;

let highscore = localStorage.getItem("snakeHighscore") ? parseInt(localStorage.getItem("snakeHighscore")) : 0;
document.getElementById("highscoreValue").textContent = highscore;

function resetSnake(){
  snake = [{x:9,y:9}];
  direction = {x:1,y:0};
  score = 0;
  document.getElementById("scoreValue").textContent = score;
  placeFood();
  drawSnake();
}

function placeFood(){
  food.x = Math.floor(Math.random() * gridSize);
  food.y = Math.floor(Math.random() * gridSize);
}

function drawSnake(){
  ctx.clearRect(0,0,snakeCanvas.width,snakeCanvas.height);

  ctx.fillStyle = "#e11d48";
  ctx.fillRect(food.x*tileSize, food.y*tileSize, tileSize, tileSize);

  ctx.fillStyle = "#0b1220";
  snake.forEach(part => {
    ctx.fillRect(part.x*tileSize, part.y*tileSize, tileSize, tileSize);
  });
}

function updateSnake(){
  let head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};

  if(head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize){
    gameOverSnake();
    return;
  }

  if(snake.some(s => s.x === head.x && s.y === head.y)){
    gameOverSnake();
    return;
  }

  snake.unshift(head);

  if(head.x === food.x && head.y === food.y){
    score++;
    document.getElementById("scoreValue").textContent = score;

    if(score > highscore){
      highscore = score;
      document.getElementById("highscoreValue").textContent = highscore;
      localStorage.setItem("snakeHighscore", highscore);
    }

    placeFood();
  } else {
    snake.pop();
  }

  drawSnake();
}

function gameOverSnake(){
  clearInterval(snakeInterval);
  running = false;
  alert("Game Over! Dein Score: " + score);
}

function startSnake(){
  if(running) return;
  running = true;
  resetSnake();
  snakeInterval = setInterval(updateSnake, snakeSpeed);
}

function restartSnake(){
  clearInterval(snakeInterval);
  running = false;
  resetSnake();
}

// Swipe controls for mobile
let touchStartX = 0;
let touchStartY = 0;

snakeCanvas.addEventListener("touchstart", function(e){
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
});

snakeCanvas.addEventListener("touchmove", function(e){
  e.preventDefault();
  const dx = e.touches[0].clientX - touchStartX;
  const dy = e.touches[0].clientY - touchStartY;

  if(Math.abs(dx) > Math.abs(dy)){
    if(dx > 20 && direction.x !== -1) direction = {x:1,y:0};
    if(dx < -20 && direction.x !== 1) direction = {x:-1,y:0};
  } else {
    if(dy > 20 && direction.y !== -1) direction = {x:0,y:1};
    if(dy < -20 && direction.y !== 1) direction = {x:0,y:-1};
  }
});

// Keyboard controls (PC)
document.addEventListener("keydown", function(e){
  if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){
    e.preventDefault();
  }
  if(!running) return;

  if(e.key === "ArrowUp" && direction.y !== 1) direction = {x:0,y:-1};
  if(e.key === "ArrowDown" && direction.y !== -1) direction = {x:0,y:1};
  if(e.key === "ArrowLeft" && direction.x !== 1) direction = {x:-1,y:0};
  if(e.key === "ArrowRight" && direction.x !== -1) direction = {x:1,y:0};
});

resetSnake();

// ===== PONG =====
let pongCanvas = document.getElementById("pongCanvas");
let pctx = pongCanvas.getContext("2d");

let paddleWidth = 10;
let paddleHeight = 80;
let ballSize = 10;

let p1Y = (pongCanvas.height - paddleHeight) / 2;
let p2Y = (pongCanvas.height - paddleHeight) / 2;

let ball = {x: pongCanvas.width/2, y: pongCanvas.height/2, vx: 3, vy: 3};

let p1Score = 0;
let p2Score = 0;

let pongInterval;
let pongRunning = false;

function drawPong(){
  pctx.clearRect(0,0,pongCanvas.width,pongCanvas.height);

  pctx.fillStyle = "#0b1220";
  pctx.fillRect(10, p1Y, paddleWidth, paddleHeight);
  pctx.fillRect(pongCanvas.width-20, p2Y, paddleWidth, paddleHeight);

  pctx.fillRect(ball.x, ball.y, ballSize, ballSize);
}

function updatePong(){
  ball.x += ball.vx;
  ball.y += ball.vy;

  if(ball.y < 0 || ball.y + ballSize > pongCanvas.height){
    ball.vy *= -1;
  }

  if(ball.x < 20 && ball.x > 10 && ball.y > p1Y && ball.y < p1Y + paddleHeight){
    ball.vx *= -1;
  }

  if(ball.x + ballSize > pongCanvas.width-20 && ball.y > p2Y && ball.y < p2Y + paddleHeight){
    ball.vx *= -1;
  }

  if(ball.x < 0){
    p2Score++;
    document.getElementById("p2Score").textContent = p2Score;
    resetBall();
  }

  if(ball.x > pongCanvas.width){
    p1Score++;
    document.getElementById("p1Score").textContent = p1Score;
    resetBall();
  }

  if(ball.y < p2Y + paddleHeight/2) p2Y -= 4;
  if(ball.y > p2Y + paddleHeight/2) p2Y += 4;

  if(p2Y < 0) p2Y = 0;
  if(p2Y + paddleHeight > pongCanvas.height) p2Y = pongCanvas.height - paddleHeight;

  drawPong();
}

function resetBall(){
  ball.x = pongCanvas.width/2;
  ball.y = pongCanvas.height/2;
  ball.vx = -ball.vx;
}

function startPong(){
  if(pongRunning) return;
  pongRunning = true;
  pongInterval = setInterval(updatePong, 16);
}

function resetPong(){
  clearInterval(pongInterval);
  pongRunning = false;
  p1Score = 0;
  p2Score = 0;
  document.getElementById("p1Score").textContent = 0;
  document.getElementById("p2Score").textContent = 0;
  ball = {x: pongCanvas.width/2, y: pongCanvas.height/2, vx: 3, vy: 3};
  p1Y = (pongCanvas.height - paddleHeight) / 2;
  p2Y = (pongCanvas.height - paddleHeight) / 2;
  drawPong();
}

document.addEventListener("keydown", function(e){
  if(e.key === "ArrowUp" && p1Y > 0) p1Y -= 12;
  if(e.key === "ArrowDown" && p1Y + paddleHeight < pongCanvas.height) p1Y += 12;
});

resetPong();

/* ================= SHOP ================= */
const auctions = {
  1: {end:"2026-01-30T10:00:00", start:67.69, bid:67.69, id:"countdown1", info:"bidInfo1", priceText:"price1"},
  2: {end:"2026-02-12T12:00:00", start:12.99, bid:12.99, id:"countdown2", info:"bidInfo2", priceText:"price2"},
  3: {end:"2026-01-28T13:00:00", start:20.99, bid:20.99, id:"countdown3", info:"bidInfo3", priceText:"price3"}
};

function formatGermanDate(d){
  const day = String(d.getDate()).padStart(2,"0");
  const month = String(d.getMonth()+1).padStart(2,"0");
  const year = d.getFullYear();
  const hours = String(d.getHours()).padStart(2,"0");
  const mins = String(d.getMinutes()).padStart(2,"0");
  return `${day}.${month}.${year} ${hours}:${mins}`;
}

function updateCountdown(){
  const now = new Date();
  for(let k in auctions){
    let a = auctions[k];
    let end = new Date(a.end);
    let diff = end - now;

    if(diff <= 0){
      document.getElementById(a.id).textContent = "Auktion beendet";
      continue;
    }

    let days = Math.floor(diff / (1000*60*60*24));
    let hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
    let mins = Math.floor((diff % (1000*60*60)) / (1000*60));
    let secs = Math.floor((diff % (1000*60)) / 1000);

    document.getElementById(a.id).textContent =
      `Endet: ${formatGermanDate(end)} | Noch: ${days}d ${hours}h ${mins}m ${secs}s`;
  }
}

setInterval(updateCountdown, 1000);
updateCountdown();

function placeBid(id){
  let a = auctions[id];
  let input = document.getElementById(`bid${id}`);
  let value = parseFloat(input.value);
  if(isNaN(value)) return;

  let now = new Date();
  if(new Date(a.end) - now <= 0){
    document.getElementById(a.info).textContent = "Auktion ist beendet.";
    return;
  }

  if(value <= a.bid){
    document.getElementById(a.info).textContent = `Dein Gebot muss h√∂her sein als ${a.bid.toFixed(2)}‚Ç¨`;
    return;
  }

  a.bid = value;

  document.getElementById(a.priceText).textContent = `Aktuelles Gebot: ${a.bid.toFixed(2)}‚Ç¨`;
  document.getElementById(a.info).textContent = `Neues H√∂chstgebot: ${a.bid.toFixed(2)}‚Ç¨`;

  input.value = "";
}

/* ================= FAQ ================= */
function toggleFAQ(el){
  const answer = el.nextElementSibling;
  const icon = el.querySelector(".faq-icon");
  if(answer.style.display === "block"){
    answer.style.display = "none";
    icon.textContent = "+";
  } else {
    answer.style.display = "block";
    icon.textContent = "‚àí";
  }
}

// ===== Contact Mail =====
function sendMail(e){
  e.preventDefault();
  let name=document.getElementById("name").value;
  let email=document.getElementById("email").value;
  let message=document.getElementById("message").value;
  let mailtoLink=`mailto:fabian@matos.de?subject=Kontakt%20von%20${encodeURIComponent(name)}&body=${encodeURIComponent("Name: "+name+"\nE-Mail: "+email+"\n\nNachricht:\n"+message)}`;
  window.location.href=mailtoLink;
}

// ===== WORTSPIEL =====
function reimName(){
  const reime = [
    "Sabian", "Ramian", "Nabian", "Lamian", "Besamian",
    "Fabse Mitasch", "Fabian mit Plan", "Fabian total dran", "Fabian der Mann"
  ];
  const zufall = reime[Math.floor(Math.random() * reime.length)];
  document.getElementById("reimErgebnis").textContent = "Fabian = " + zufall;
}

/* ================= MAZE (2D + 3D) ================= */

let mazeSize = 15; // mittel
let maze = [];
let player = {x:1, y:1};
let goal = {x:mazeSize-2, y:mazeSize-2};

let mazeMode = "2d";

function generateMaze(){
  maze = Array.from({length:mazeSize},()=>Array.from({length:mazeSize},()=>1));
  // Simple maze generator (DFS)
  let stack = [{x:1,y:1}];
  maze[1][1]=0;

  while(stack.length){
    let cur = stack[stack.length-1];
    let dirs = [
      {x:2,y:0},{x:-2,y:0},{x:0,y:2},{x:0,y:-2}
    ].sort(()=>Math.random()-0.5);

    let moved=false;
    for(let d of dirs){
      let nx = cur.x+d.x, ny = cur.y+d.y;
      if(nx>0 && ny>0 && nx<mazeSize-1 && ny<mazeSize-1 && maze[ny][nx]==1){
        maze[ny][nx]=0;
        maze[cur.y+d.y/2][cur.x+d.x/2]=0;
        stack.push({x:nx,y:ny});
        moved=true;
        break;
      }
    }
    if(!moved) stack.pop();
  }

  player={x:1,y:1};
  goal={x:mazeSize-2,y:mazeSize-2};
}

function drawMaze2D(){
  const canvas = document.getElementById("maze2d");
  const ctx = canvas.getContext("2d");
  const w = canvas.width;
  const h = canvas.height;
  const cellW = w/mazeSize;
  const cellH = h/mazeSize;

  ctx.clearRect(0,0,w,h);

  for(let y=0;y<mazeSize;y++){
    for(let x=0;x<mazeSize;x++){
      if(maze[y][x]==1){
        ctx.fillStyle="#0b1220";
        ctx.fillRect(x*cellW,y*cellH,cellW,cellH);
      } else {
        ctx.fillStyle="#fff";
        ctx.fillRect(x*cellW,y*cellH,cellW,cellH);
      }
    }
  }

  // goal
  ctx.fillStyle="#22c55e";
  ctx.fillText("üß¶", (goal.x+0.1)*cellW, (goal.y+0.8)*cellH);
  ctx.font="28px Arial";

  // player
  ctx.fillStyle="#e11d48";
  ctx.fillText("ü¶∂", (player.x+0.1)*cellW, (player.y+0.8)*cellH);
  ctx.font="28px Arial";
}

function setMazeMode(mode){
  mazeMode = mode;
  document.getElementById("mazeCanvas2d").style.display = mode==="2d" ? "block" : "none";
  document.getElementById("mazeCanvas3d").style.display = mode==="3d" ? "block" : "none";
  if(mode==="3d") init3DMaze();
  drawMaze2D();
}

function resetMaze(){
  generateMaze();
  if(mazeMode==="3d") init3DMaze();
  drawMaze2D();
}

function movePlayer(dx,dy){
  let nx = player.x+dx;
  let ny = player.y+dy;
  if(nx<0||ny<0||nx>=mazeSize||ny>=mazeSize) return;
  if(maze[ny][nx]==1) return;
  player.x=nx; player.y=ny;
  drawMaze2D();
  if(mazeMode==="3d") update3DPlayer();
  checkGoal();
}

function checkGoal(){
  if(player.x===goal.x && player.y===goal.y){
    alert("Du hast gewonnen! üéâ");
    resetMaze();
  }
}

document.addEventListener("keydown", function(e){
  if(document.getElementById("maze").style.display==="block"){
    if(e.key==="ArrowUp") movePlayer(0,-1);
    if(e.key==="ArrowDown") movePlayer(0,1);
    if(e.key==="ArrowLeft") movePlayer(-1,0);
    if(e.key==="ArrowRight") movePlayer(1,0);
  }
});

// Swipe control for maze
let mzTouchStartX=0, mzTouchStartY=0;
document.getElementById("maze2d").addEventListener("touchstart", function(e){
  mzTouchStartX=e.touches[0].clientX;
  mzTouchStartY=e.touches[0].clientY;
});
document.getElementById("maze2d").addEventListener("touchmove", function(e){
  e.preventDefault();
  const dx=e.touches[0].clientX-mzTouchStartX;
  const dy=e.touches[0].clientY-mzTouchStartY;
  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>20) movePlayer(1,0);
    if(dx<-20) movePlayer(-1,0);
  } else {
    if(dy>20) movePlayer(0,1);
    if(dy<-20) movePlayer(0,-1);
  }
});

// ================= 3D Maze with Three.js =================

let scene, camera, renderer, playerMesh, goalMesh;
let wallSize = 1;
let mazeObjects = [];
let cameraTarget = new THREE.Vector3();

function init3DMaze(){
  // clean up
  if(renderer){
    renderer.dispose();
    renderer.domElement.remove();
  }

  scene = new THREE.Scene();
  scene.background = new THREE.Color(0xf7f8fb);

  camera = new THREE.PerspectiveCamera(75, 720/420, 0.1, 1000);
  camera.position.set(1.5, 1.5, 1.5);
  camera.lookAt(1.5,0,1.5);

  renderer = new THREE.WebGLRenderer({canvas: document.getElementById("maze3d"), antialias:true});
  renderer.setSize(720,420);

  // light
  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(5,10,5);
  scene.add(light);

  const ambient = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambient);

  // walls
  mazeObjects.forEach(o=>scene.remove(o));
  mazeObjects=[];

  const wallGeo = new THREE.BoxGeometry(wallSize,1,wallSize);
  const wallMat = new THREE.MeshStandardMaterial({color:0x0b1220});

  for(let y=0;y<mazeSize;y++){
    for(let x=0;x<mazeSize;x++){
      if(maze[y][x]==1){
        let wall = new THREE.Mesh(wallGeo, wallMat);
        wall.position.set(x,0.5,y);
        scene.add(wall);
        mazeObjects.push(wall);
      }
    }
  }

  // floor
  const floorGeo = new THREE.PlaneGeometry(mazeSize, mazeSize);
  const floorMat = new THREE.MeshStandardMaterial({color:0xffffff});
  const floor = new THREE.Mesh(floorGeo,floorMat);
  floor.rotation.x=-Math.PI/2;
  floor.position.set((mazeSize-1)/2,0,(mazeSize-1)/2);
  scene.add(floor);

  // player (foot emoji as texture)
  const playerTex = new THREE.TextureLoader().load("data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
    <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128">
      <text x="50%" y="55%" font-size="90" text-anchor="middle" dominant-baseline="middle">ü¶∂</text>
    </svg>
  `));
  const playerMat = new THREE.SpriteMaterial({map: playerTex});
  playerMesh = new THREE.Sprite(playerMat);
  playerMesh.scale.set(0.8,0.8,0.8);
  scene.add(playerMesh);

  // goal (sock emoji)
  const goalTex = new THREE.TextureLoader().load("data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
    <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128">
      <text x="50%" y="55%" font-size="90" text-anchor="middle" dominant-baseline="middle">üß¶</text>
    </svg>
  `));
  const goalMat = new THREE.SpriteMaterial({map: goalTex});
  goalMesh = new THREE.Sprite(goalMat);
  goalMesh.scale.set(0.8,0.8,0.8);
  scene.add(goalMesh);

  update3DPlayer();
  animate3D();
}

function update3DPlayer(){
  playerMesh.position.set(player.x, 0.5, player.y);
  goalMesh.position.set(goal.x, 0.5, goal.y);

  camera.position.set(player.x+2, 2, player.y+2);
  camera.lookAt(player.x,0,player.y);
}

function animate3D(){
  requestAnimationFrame(animate3D);
  renderer.render(scene,camera);
}

// init
generateMaze();
drawMaze2D();
init3DMaze();
</script>

</body>
</html>
